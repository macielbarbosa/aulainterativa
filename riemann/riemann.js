var parameters = {
    "id":"ggb",
    "width":490,
    "height":409,
    "showToolBar":false,
    "borderColor":null,
    "showMenuBar":false,
    "showAlgebraInput":false,
    "showResetIcon":false,
    "enableLabelDrags":false,
    "enableShiftDragZoom":true,
    "enableRightClick":false,
    "capturingThreshold":null,
    "showToolBarHelp":false,
    "errorDialogsActive":false,
    "useBrowserForJS":true,
    "ggbBase64":"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"
};
var applet = new GGBApplet(parameters, '5.0');

var ggb = document.ggb;
var ggbInit=false;
var tab1 = 2, tab2 = 2;
var funcao = 'sin(x)';
var xmin = 0, xmax = 2;
var tipoIntegracao = 'sup';

window.onload = function() {
    applet.inject('applet-container','preferHTML5');
    initialValues();
}

function ggbOnInit () {
    ggbInit=true;
}

function initialValues () {
    document.getElementById('funcao').value = 'sin(x)';
	document.getElementById('xmin').value = 0;
	document.getElementById('xmax').value = 2;
	document.getElementById('n').value = 2;
	document.getElementById('rangeN').value = '2';
}

function geogebra (comando) {
    document.ggb.evalCommand(comando);
}

function setFuncao () {
    funcao = document.getElementById('funcao').value
    geogebra('f(x)='+funcao);
    document.getElementById('valorSoma').innerHTML = ggb.getValue('integral').toFixed(2);
    reiniciarTabela();
    adicionarValorTabela();
    setEscala();
}

function setDominio () {
    xmin = document.getElementById('xmin').value;
    xmax = document.getElementById('xmax').value;
    geogebra('a='+xmin);
    geogebra('b='+xmax);
    document.getElementById('valorSoma').innerHTML = ggb.getValue('integral').toFixed(2);
    reiniciarTabela();
    adicionarValorTabela();
    setEscala();
}

function setTipoIntegracao () {
    var tipo = document.getElementsByName('tipoIntegracao')
    tipoIntegracao = tipo[0].checked ? 'sup' : tipo[1].checked ? 'inf' : 'ambos';

    switch (tipoIntegracao) {
        case 'sup':
        ggb.setVisible('superior',true);
        ggb.setVisible('inferior',false);
        break;
        case 'inf':
        ggb.setVisible('inferior',true);
        ggb.setVisible('superior',false);
        break;
        case 'ambos':
        ggb.setVisible('superior',true);
        ggb.setVisible('inferior',true);
    }
}

function setValorN (element) {
    var inputN = document.getElementById('n');
	var rangeN = document.getElementById('rangeN');
    var valorN = document.getElementById('valorN');
    if (element===rangeN) {
        valorN.innerHTML = rangeN.value;
        geogebra('n='+rangeN.value);
        return;
    }
    valorN.innerHTML = inputN.value;
    rangeN.max = inputN.value;
    rangeN.value = inputN.value;
    geogebra('n='+inputN.value);
    adicionarValorTabela();
}

function setEscala () {
    var x1, x2, y1, y2;
    var ax1, ax2, ay1, ay2;
    var p1, p2;
    var ymin = ggb.getValue('y1');
    var ymax = ggb.getValue('y2');
    
    if (xmin <= xmax) {
        x1 = xmin;
        x2 = xmax;
    }
    else {
        x2 = xmin;
        x1 = xmax;
    }
    if (ymin <= ymax) {
        y1 = ymin;
        y2 = ymax;
    }
    else {
        y2 = ymin;
        y1 = ymax;
    }
    if (y1 > 0) y1 = 0;
    if (y2 < 0) y2 = 0;

    x1 = Number(x1);
    x2 = Number(x2);
    y1 = Number(y1);
    y2 = Number(y2);

    px = 0.2*(x2-x1);
    py = 0.2*(y2-y1);

    console.log('x1='+x1);
    console.log('x2='+x2);
    console.log('y1='+y1);
    console.log('y2='+y2);

    x1 = (x1 - px).toFixed(2);
    x2 = (x2 + px).toFixed(2);
    y1 = (y1 - py).toFixed(2);
    y2 = (y2 + py).toFixed(2);

    console.log('ax1='+ax1);
    console.log('ax2='+ax2);
    console.log('ay1='+ay1);
    console.log('ay2='+ay2);

    ggb.setCoordSystem(x1,x2,y1,y2);
    console.log('foi');
}

function adicionarValorTabela () {
	var rangeN = document.getElementById('rangeN');
    var valorN = document.getElementById('valorN');
    valorN.innerHTML = rangeN.value;
    geogebra('n='+rangeN.value);
    inserirInferior(ggb.getValue('inferior').toFixed(2));
    inserirSuperior(ggb.getValue('superior').toFixed(2));
}

function inserirInferior (valor) {
	if(tab1==1){
		document.getElementById('vi1').innerHTML = valor;
		document.getElementById('np1').innerHTML = document.getElementById('rangeN').value;
		tab1++;
	}
	else if(tab1==2){
		document.getElementById('vi2').innerHTML = document.getElementById('vi1').innerHTML;
		document.getElementById('vi1').innerHTML = valor;
		document.getElementById('np2').innerHTML = document.getElementById('np1').innerHTML;
		document.getElementById('np1').innerHTML = document.getElementById('rangeN').value;
		tab1++;
	}
	else if(tab1==3){
		document.getElementById('vi3').innerHTML = document.getElementById('vi2').innerHTML;
		document.getElementById('vi2').innerHTML = document.getElementById('vi1').innerHTML;
		document.getElementById('vi1').innerHTML = valor;
		document.getElementById('np3').innerHTML = document.getElementById('np2').innerHTML;
		document.getElementById('np2').innerHTML = document.getElementById('np1').innerHTML;
		document.getElementById('np1').innerHTML = document.getElementById('rangeN').value;
	}
}

function inserirSuperior (valor) {
	if(tab2==1){
		document.getElementById('vs1').innerHTML = valor;
		tab2++;
	}
	else if(tab2==2){
		document.getElementById('vs2').innerHTML = document.getElementById('vs1').innerHTML;
		document.getElementById('vs1').innerHTML = valor;
		tab2++;
	}
	else if(tab2==3){
		document.getElementById('vs3').innerHTML = document.getElementById('vs2').innerHTML;
		document.getElementById('vs2').innerHTML = document.getElementById('vs1').innerHTML;
		document.getElementById('vs1').innerHTML = valor;
	}
}

function reiniciarTabela () {
    document.getElementById('vi3').innerHTML = '--';
    document.getElementById('vi2').innerHTML = '--';
    document.getElementById('vs3').innerHTML = '--';
    document.getElementById('vs2').innerHTML = '--';
    document.getElementById('np3').innerHTML = '--';
    document.getElementById('np2').innerHTML = '--';
    tab1 = 1;
    tab2 = 1;
}